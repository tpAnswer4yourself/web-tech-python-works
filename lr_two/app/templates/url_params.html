{% extends 'base.html' %}

{% block content %}
<div class="mt-2">
    <div class="fs-4">
        <h2>Параметры URL</h2>
        <div class="mt-3 mb-3 d-flex gap-3 justify-content-between">
            <input class="form-control" type="text" placeholder="Введите свои URL-параметры" id="cst-params"
                style="text-overflow: ellipsis; overflow: hidden">
            <button class="btn btn-primary" onclick="testCustomParams()">Применить</button>
        </div>

    </div>
    <div>
        {% if params%}
        <div>
            <table class="table table-light table-striped">
                <thead>
                    <tr>
                        <th scope="col">#</th>
                        <th scope="col">Ключ</th>
                        <th scope="col">Значение</th>
                    </tr>
                </thead>
                <tbody>
                    {% for key, value in params.items() %}
                    <tr>
                        <th scope="row">{{loop.index}}</th>
                        <td>{{key}}</td>
                        <td>{{value}}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
        {% else %}
        <div class="alert alert-danger d-flex justify-content-center mt-2">
            <p class="m-auto">Отсутствуют параметры в URL. Протестируйте, нажав на одну из кнопок ниже.</p>
        </div>
        {% endif %}
        <div class="url-buttons d-flex gap-2 justify-content-center mb-5">
            <a class="btn btn-danger" href="{{ url_for('url_parametres') }}">Сбросить URL</a>
            <a class="btn btn-primary"
                href="{{ url_for('url_parametres') }}?name=Иван&age=25&city=Москва&hobby=программирование&page=1&sort=desc">URL
                №1</a>
            <a class="btn btn-primary" href="{{ url_for('url_parametres') }}?test=value&debug=true&user=123">URL №2</a>
            <a class="btn btn-primary"
                href="{{ url_for('url_parametres') }}?user[name]=John&user[age]=30&user[city]=NYC">URL №3</a>
            <a class="btn btn-primary"
                href="{{ url_for('url_parametres') }}?type={source_type}&source={source}&block={position_type}&pos={position}&key={keyword}&campaign={campaign_id}&name={campaign_name}&name_lat={campaign_name_lat}&retargeting={retargeting_id}&ad={ad_id}&phrase={phrase_id}&gbid={gbid}&device={device_type}&region={region_id}&region_name={region_name}">URL
                №4</a>
        </div>
    </div>
</div>

<script>
    function testCustomParams() {
        const params = document.getElementById('cst-params').value
        if (params) {
            window.location.href = `{{ url_for('url_parametres') }}?${params}`
        }
    }
</script>

{% endblock %}